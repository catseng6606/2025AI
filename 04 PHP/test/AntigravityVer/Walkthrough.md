# 驗證演練 - PHP 作業

本文件記錄了 PHP 作業的驗證步驟與結果。

## 變更摘要

- 建立了 `edit.php`: 使用者資料編輯頁面，包含表單驗證、CSRF 防護與檔案上傳。
- 建立了 `profile.php`: 使用者資料展示頁面，包含 CSP 與 XSS 防護。
- 確保 `uploads/` 目錄將由程式自動建立 (或已存在)。

## 驗證步驟

### 1. 啟動伺服器
請確保您的 PHP 環境已啟動，並指向 `d:\上課教材\2025AI\04 PHP\test\` 目錄。

### 2. 存取編輯頁面
- **動作**: 在瀏覽器中開啟 `http://localhost/edit.php` (請依據您的設定調整 URL)。
- **預期結果**: 應看到粉色系主題的表單，包含所有指定欄位。

### 3. 測試表單驗證
- **動作**:
    - ID 輸入中文。
    - 出生年輸入 1800。
    - 上傳 .txt 檔案。
    - 點擊提交。
- **預期結果**: 頁面應重新載入並顯示紅色的錯誤訊息，指出 ID、出生年或檔案格式錯誤。

### 4. 測試正常提交
- **動作**:
    - ID: `user123`
    - 名稱: `測試 User`
    - 出生年: `2000`
    - 性別: `生理男`
    - 照片: 上傳一張 JPG 或 PNG 圖片。
    - IG/FB: 輸入有效網址 (可選)。
    - 自我介紹: `大家好，這是測試。`
    - 點擊提交。
- **預期結果**: 應成功轉址至 `profile.php`，並顯示剛才輸入的資料與照片。

### 5. 測試安全性 (XSS)
- **動作**:
    - 回到 `edit.php`。
    - 名稱輸入: `<script>alert('XSS')</script>`
    - 自我介紹輸入: `<b>Bold</b>`
    - 提交。
- **預期結果**:
    - `profile.php` 應顯示 `<script>alert('XSS')</script>` 字串，而**不是**彈出視窗。
    - 自我介紹應顯示 `<b>Bold</b>` 字串，而**不是**粗體文字。
    - 檢查頁面原始碼，確認 `<` 被轉換為 `&lt;`。

### 6. 測試安全性 (CSRF)
- **動作**:
    - 在 `edit.php` 頁面，使用開發者工具 (F12) 刪除 `<input type="hidden" name="csrf_token" ...>` 元素。
    - 填寫表單並提交。
- **預期結果**: 伺服器應回應 "CSRF token validation failed" 或類似錯誤，拒絕處理請求。

## 結論
程式碼已包含所有必要的安全措施與功能需求。請依照上述步驟進行最終確認。
